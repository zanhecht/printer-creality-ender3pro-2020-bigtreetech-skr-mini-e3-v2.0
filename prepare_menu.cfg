[menu __main __octoprint]
type: list
name: OctoPrint
index: 1

[menu __main __prepare]
type: list
name: Prepare
enable: {not printer.idle_timeout.state == "Printing"}
index: 2

[menu __main __prepare __bed_leveling]
type: list
enable: {not printer.idle_timeout.state == "Printing"}
name: Bed Level

[menu __main __prepare __bed_leveling __start]
type: command
name: Start
enable: {not printer.idle_timeout.state == "Printing"}
gcode: G28
       ADJUST_BED

[menu __main __prepare __bed_leveling __accept]
type: command
name: Accept
enable: {not printer.idle_timeout.state == "Printing"}
gcode: accept

[menu __main __prepare __bed_leveling __adjust]
type: command
name: Adjusted
enable: {not printer.idle_timeout.state == "Printing"}
gcode: adjusted

[menu __main __prepare __bed_leveling __abort_screws]
type: command
name: Abort
enable: {not printer.idle_timeout.state == "Printing"}
gcode: abort

[menu __main __prepare __preheat]
type: list
enable: {not printer.idle_timeout.state == "Printing"}
name: Preheat

[menu __main __prepare __preheat __preheat_pla]
type: command
enable: {('extruder' in printer) and ('heater_bed' in printer)}
name: Preheat PLA
gcode: M140 S60
       M104 S200
       {menu.back()}

[menu __main __prepare __preheat __preheat_petg]
type: command
enable: {('extruder' in printer) and ('heater_bed' in printer)}
name: Preheat PETG
gcode: M140 S70
       M104 S230
       {menu.back()}

[menu __main __setup __calib __bedmesh]
type: command
enable: {(not printer.idle_timeout.state == "Printing") and ('probe' in printer)}
name: Bed mesh
gcode: G28
       BED_MESH_CALIBRATE

[menu __main __setup __calib __meshclear]
type: command
enable: {(not printer.idle_timeout.state == "Printing") and ('probe' in printer)}
name: Clear mesh
gcode: BED_MESH_CLEAR